/**
 * @author   service@ntfstool.com
 * Copyright (c) 2020 ntfstool.com
 * Copyright (c) 2020 alfw.com
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the MIT General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * MIT General Public License for more details.
 *
 * You should have received a copy of the MIT General Public License
 * along with this program (in the main directory of the NTFS Tool
 * distribution in the file COPYING); if not, write to the service@ntfstool.com
 */

// Vue 3 Main Entry Point
import { createApp } from 'vue'
import axios from 'axios'
import App from './App.vue'
import router from '@/common/router/index'

// Element Plus (Vue 3 version of Element UI)
import ElementPlus from 'element-plus'
import 'element-plus/dist/index.css'
import '@/renderer/theme/ntfstool.css'

// Vue I18n
import messages from '@/common/lang/index'
import { createI18n } from 'vue-i18n'

// Electron Store
const Store = require('electron-store')
const store = new Store()

// Get current language
let langNow = store.get("lang", "en")

// Create i18n instance
const i18n = createI18n({
  legacy: false, // Use Composition API mode
  locale: langNow,
  fallbackLocale: "en",
  messages
})

// Create Vue app
const app = createApp(App)

// Configure axios
app.config.globalProperties.$http = axios

// Use plugins
app.use(ElementPlus)
app.use(router)
app.use(i18n)

// Production configuration
app.config.productionTip = false
app.config.devtools = false

// Mount app
app.mount('#app')
